language: ruby

rvm:
  - 2.6.1

install:
  - bundle install

services:
  - docker

addons:
  chrome: stable

jobs:
  include:
    - stage: unit-test
      script: bundle exec rspec
    # - stage: integration-test
    #   script: bundle exec rake integration
    #   after_failure: bundle exec rake upload_screenshots
    - stage: deploy
      script: rake publish
      if: branch = master AND type = push
